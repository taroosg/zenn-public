---
title: "Deno ã§ Basic èªè¨¼ã‚’å‹•ã‹ã—ãŸã„"
emoji: "ğŸ¦•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["deno"]
published: true
---

## çŠ¶æ³

- Deno ã§å€‹äººï¼ˆã¨å°‘æ•°ã®ãƒ¦ãƒ¼ã‚¶ï¼‰ãŒåˆ©ç”¨ã™ã‚‹ web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ãŸï¼

- å°è¦æ¨¡ãªã®ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ã¯å¿…è¦ãªã„ãŒï¼Œç°¡æ˜“çš„ãªèªè¨¼ã‚’ã¤ã‘ãŸã„ã®ã§ Basic èªè¨¼ã‚’ç”¨ã„ã‚‹ã“ã¨ã¨ã—ãŸï¼

## Http ã‚µãƒ¼ãƒã‚’å‹•ã‹ã™ã‚³ãƒ¼ãƒ‰

`server.ts` ã‚’ä½œæˆã—ï¼Œä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãï¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãã®ã¾ã¾ï¼

å‚è€ƒï¼š[https://deno.land/manual@v1.28.3/examples/http_server](https://deno.land/manual@v1.28.3/examples/http_server)

```ts
// server.ts

import { serve } from "https://deno.land/std@0.167.0/http/server.ts";

const port = 8080;

const handler = (request: Request): Response => {
  const body = `Your user-agent is:\n\n${
    request.headers.get("user-agent") ?? "Unknown"
  }`;

  return new Response(body, { status: 200 });
};

console.log(`HTTP webserver running. Access it at: http://localhost:8080/`);
await serve(handler, { port });
```

## Basic èªè¨¼ã‚’è¿½åŠ 

ãƒ¦ãƒ¼ã‚¶åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç”¨æ„ã—ã¦ãŠãï¼ˆå®Ÿéš›ã¯ç’°å¢ƒå¤‰æ•°ã«è¨­å®šã—ã¦èª­ã¿è¾¼ã‚€ãªã©ï¼‰ï¼

```ts
// server.ts

import { serve } from "https://deno.land/std@0.167.0/http/server.ts";

const port = 8080;

const handler = (request: Request): Response => {
  const user = "admin";
  const password = "password";

  // ğŸ”½ã“ã“ã§èªè¨¼ãŒå‹•ã
  if (
    request.headers.get("Authorization") !==
    `Basic ${btoa(`${user}:${password}`)}`
  ) {
    const headers = new Headers({
      "WWW-Authenticate": 'Basic realm="Fake Realm"',
    });
    return new Response("Unauthorized", { status: 401, headers });
  }

  const body = `Your user-agent is:\n\n${
    request.headers.get("user-agent") ?? "Unknown"
  }`;

  return new Response(body, { status: 200 });
};

console.log(`HTTP webserver running. Access it at: http://localhost:8080/`);
await serve(handler, { port });
```

## ã¾ã¨ã‚

æ„å¤–ã¨æƒ…å ±ãŒãªã‹ã£ãŸã®ã§å›°ã£ãŸãŒï¼Œæ¯å›åŒã˜ãªã®ã§æµç”¨ã™ã‚Œã° OKï¼

ä»¥ä¸Šã ( `ï½¥Ï‰ï½¥)b

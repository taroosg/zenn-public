---
title: "Mac ã§ Terraform ã‚’æ‰±ã†ã¨ãã¯ brew install hashicorp/tap/terraform ã‚’ä½¿ã†"
emoji: "ğŸ•Šï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["terraform", "aws", "homebrew"]
published: true
---

## çŠ¶æ³

- Mac ã§ Terraform ã‚’æ‰±ã†ã“ã¨ã«ãªã‚Šï¼Œ`brew install terraform` ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸï¼

- ã‚¤ãƒ³ãƒˆãƒ¼ãƒ«è‡ªä½“ã¯å•é¡Œãªãå®Œäº†ã—ãŸãŒï¼Œ`terraform init` ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸï¼

- aws-cli ã§ SSO æ¥ç¶šæ¸ˆã¿ï¼

## å®Ÿè¡Œã—ãŸæ‰‹é †

```bash
brew install terraform

# å•é¡Œãªãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†

# ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãŠã
aws sso login --profile hogefuga


terraform init

# ã‚¨ãƒ©ãƒ¼
Initializing the backend...
Initializing modules...
â•·
â”‚ Error: error configuring S3 Backend: Error creating AWS session: profile "hogefuga" is configured to use SSO but is missing required configuration: sso_region, sso_start_url
â”‚
â”‚
â•µ
```

AWS ã®æƒ…å ±ã¯å•é¡Œãªã„

```bash
cat ~/.aws/config

[profile hogefuga]
sso_session = taroosg
sso_account_id = 111122223333
sso_role_name = AdministratorAccess
region = ap-northeast-1
[sso-session hogefuga]
sso_start_url = https://d-9999999999.awsapps.com/start/
sso_region = ap-northeast-1
sso_registration_scopes = sso:account:access
```

## åŸå› 

`brew install terraform` ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ Terraform ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„ï¼

- ä¸Šè¨˜ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ã¯ Terraform 1.6 ä»¥é™ã§ã® SSO è¨­å®šæƒ…å ±ã§ã‚ã‚‹ï¼

- `brew install terraform` ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ Terraform ã¯ v1.5.7 ã§ã‚ã‚Šï¼ŒSSO è¨­å®šæƒ…å ±ãŒåæ˜ ã•ã‚Œã¦ã„ãªã„ï¼

```bash
terraform --version
Terraform v1.5.7
on darwin_arm64
+ provider registry.terraform.io/hashicorp/aws v5.32.1

Your version of Terraform is out of date! The latest version
is 1.9.5. You can update by downloading from https://www.terraform.io/downloads.html
```

## å¯¾å¿œ

`brew install hashicorp/tap/terraform` ã‚’ä½¿ã†ã¨æœ€æ–°ã® Terraform ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ï¼

```bash
# æ—¢å­˜ã® Terraform ã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew uninstall terraform

# ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
terraform --version
zsh: command not found: terraform

# æœ€æ–°ã® Terraform ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew install hashicorp/tap/terraform

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
terraform --version
Terraform v1.9.6
on darwin_arm64
+ provider registry.terraform.io/hashicorp/aws v5.32.1
```

## ã¾ã¨ã‚

- Homebrew ä½¿ãˆã°ã„ã„ã ã‚ã®ç²¾ç¥ã§é©å½“ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã‹ã£ãŸï¼

- [å…¬å¼](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli)ã«æ›¸ã„ã¦ã‚ã‚‹ã®ã§ã¡ã‚ƒã‚“ã¨èª­ã‚ï¼ˆè‡ªæˆ’ï¼‰ï¼

ä»¥ä¸Šã ( `ï½¥Ï‰ï½¥)b
